import{_ as L,a as m,b as D,T as N}from"./index.3a09f0db.js";import{r as h,a as d,o as v,c as y,g as p,b as e,w as i,m as f,F as I,D as V,v as w}from"./vendor.925c221e.js";const C={class:"table-info-list"},k={slot:"footer",class:"dialog-footer"},x={__name:"tableInfoList",props:{dataList:{type:Array,required:!1}},emits:["change"],setup(u,{emit:t}){const _=u,r=h({multipleSelection:[],dialogVisible:!1,editInfo:[]});function b(o){r.multipleSelection=o,t("change",o)}return(o,n)=>{const a=d("el-table-column"),l=d("el-table"),s=d("el-button"),c=d("el-dialog");return v(),y(I,null,[p("div",C,[e(l,{data:_.dataList,border:"",height:"200",onSelectionChange:b},{default:i(()=>[e(a,{type:"selection",width:"55"}),e(a,{type:"index",label:"\u5E8F\u53F7",width:"60"}),e(a,{label:"\u8868\u540D",prop:"name",width:"180"})]),_:1},8,["data"])]),e(c,{title:"\u7F16\u8F91",modelValue:o.dialogVisible,"onUpdate:modelValue":n[1]||(n[1]=g=>o.dialogVisible=g)},{default:i(()=>[e(l,{data:r.editInfo,border:""},{default:i(()=>[e(a,{type:"index",label:"\u5E8F\u53F7",width:"60"}),e(a,{label:"\u5B57\u6BB5\u540D",prop:"name",width:"180"}),e(a,{label:"\u5B57\u6BB5\u7C7B\u578B",prop:"type",width:"180"}),e(a,{label:"\u5B57\u6BB5\u6CE8\u91CA",prop:"comment",width:"180"})]),_:1},8,["data"]),p("span",k,[e(s,{onClick:n[0]||(n[0]=g=>o.dialogVisible=!1)},{default:i(()=>[f("\u53D6 \u6D88")]),_:1}),e(s,{type:"primary",onClick:o.updateLableInfo},{default:i(()=>[f("\u786E \u5B9A")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])],64)}}};var T=L(x,[["__scopeId","data-v-4c821964"]]);const S={class:"btn-row"},$=V({name:"index"}),j=Object.assign($,{setup(u){const t=h({databaseName:"",tableListData:[],tableList:[],tables:[],formData:{databaseName:"",parentPackage:"com.xsgo.demo",tableInfos:[]}});w(()=>{_(),r()});function _(){m.allTableName().then(a=>{if(a.errno===0){let l=Object.keys(a.data[0])[0];t.formData.databaseName=l.replace("Tables_in_",""),t.tableListData=a.data.map(s=>s[l])}})}function r(){m.allTableInfo().then(a=>{a.errno===0&&(t.formData.databaseName=a.data.databaseName,t.tables=a.data.tableInfos)})}function b(a){t.tableList=a}function o(){m.download({databaseName:t.formData.databaseName,tables:t.tableList,parentPackage:t.formData.parentPackage,fileName:"project.zip"})}function n(a){console.log(a),t.formData.tableInfos=a}return(a,l)=>{const s=d("el-button");return v(),y(I,null,[e(D,{modelValue:t.formData,"onUpdate:modelValue":l[0]||(l[0]=c=>t.formData=c)},null,8,["modelValue"]),e(N,{dataList:t.tableListData,onChange:b},null,8,["dataList"]),e(T,{dataList:t.tables,onChange:n},null,8,["dataList"]),p("div",S,[e(s,{type:"primary",onClick:o},{default:i(()=>[f("\u751F\u6210")]),_:1})])],64)}}});var A=L(j,[["__scopeId","data-v-429b2f46"]]);export{A as default};
